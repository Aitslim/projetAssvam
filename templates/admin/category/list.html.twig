{% extends 'admin/admin_base.html.twig' %}

{% block title %}Tableau categoeries
{% endblock %}

{% block body %}
	<main>
		<div class="container-fluid px-4">
			<div class="card mb-4">
				<div class="card-header">
					<i class="fas fa-table me-1"></i>
					Liste des categories
				</div>
				<table class="table table-striped table-hover table-bordered table-sm">
					<thead>
						<tr>
							<th>Id</th>
							<th>Catégorie</th>
							<th>Nb. Articles</th>
							<th>Actifs</th>
							<th>Archivés</th>
						</tr>
					</thead>
					<tfoot>
						<tr>
							<th>Id</th>
							<th>Catégorie</th>
							<th>Nb. Articles</th>
							<th>Actifs</th>
							<th>Archivés</th>
						</tr>
					</tfoot>
					<tbody>
						{% for categorie in categories %}
							<tr>
								<td>{{ categorie.id }}</td>
								<td>{{ categorie.name }}</td>
								<td>{{ categorie.posts | length }}</td>

								{% set actifs = 0 %}
								{% for post in categorie.posts %}
									{% set actifs = actifs + post.active %}
								{% endfor %}
								<td>{{ actifs }}</td>

								{% set inactifs = (categorie.posts | length) - actifs %}
								<td>{{ inactifs }}</td>

								<td>
									<a href="{{ path('admin_category_update', {id: categorie.id}) }}" class="btn btn-primary btn-sm">Modifier</a>
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
				<a href="{{ path('admin_category_add') }}" class="btn btn-primary my-3">Ajouter</a>
			</div>
		</div>
	</main>
{% endblock %}
